<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Hangman!</title>
</head>
<body>
    <h1>Hangman!</h1>
    <script>

        var pickWord = function () {
            var words = [
                "гаракиро",
                "арсасал",
                "олдскул",
                "чкерил"
            ];

            return words[Math.floor(Math.random() * words.length)];
        };

        var setupAnswerArray = function (word) {
            var answerArray = [];
            for (var i = 0; i < word.length; i++) {
                answerArray[i] = "_";
            }

            return answerArray;
        };

        var showPlayerProgress = function (answerArray) {
            alert(answerArray.join(" "));
        };

        var getGuess = function () {
            return prompt("Guess the letter or go away!!!");
        };

        var updateGameState = function (guess, word, answerArray) {
            var appearences = 0;
            for (var j = 0; j < word.length; j++) {
                if (word[j] === guess) {
                    answerArray[j] = guess;
                    appearences++;
                }
            }

            return appearences;
        };

        var showAnswerAndCongratulatePlayer = function (answerArray) {
            showPlayerProgress(answerArray);
            alert("Well done! It was right word " + word);
        };

        var word = pickWord();
        var answerArray = setupAnswerArray(word);
        var remainingLetters = word.length;
        var motion = 6;
        var isHit = false;

        while ((remainingLetters > 0) && (motion > 0)) {
            showPlayerProgress(answerArray);
//            alert(answerArray.join(" "));

        var guess = getGuess();
        guess = guess.toLowerCase();
            if (guess === null) {
            break;
        } else if (guess.length !== 1) {
            alert ("Please, enter only 1 letter!!!");
        } else {
        var correctGuesses = updateGameState(guess, word, answerArray);
        remainingLetters -= correctGuesses;
        isHit = false;

        for (var k = 0; k < word.length; k++) {
            var letterWasEntered = answerArray[k] === guess;
            if (letterWasEntered) {
                alert("You have entered this letter before!!!");
                break;
            } if (word[k] === guess) {
                answerArray[k] = guess;
                remainingLetters--;
                isHit = true;
                }
            } if (!isHit) {
                motion--;
                alert("You have only " + motion + " attempts!!!");
                if (motion === 0) {
                    alert("No more attempts!!!")
                    break;
                }
            }
        }
        showAnswerAndCongratulatePlayer(answerArray);
    }
//        alert(answerArray.join(" "));
    </script>
</body>
</html>
